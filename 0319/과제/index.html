<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div id="app">
      <div class="form-container">
        <h1>ì‚¬ìš©ì ëª©ë¡ ê´€ë¦¬</h1>
        <div>
          <div class="label">ğŸ ì´ë¦„</div>
          <input type="text" :value="newName" v-model.trim.lazy="newName" />
          <span v-if="isNameNull" class="error">ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”!</span>
        </div>
        <div>
          <div class="label">ğŸ ì „í™”ë²ˆí˜¸</div>
          <input type="text" :value="newPhone" v-model.trim.lazy="newPhone" />
          <span v-if="isPhoneNull" class="error">ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”!</span>
        </div>
        <div>
          <div class="label">ğŸ ì§€ì—­</div>
          <select v-model="newRegion">
            <option disabled selected value="">ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”</option>
            <option value="ì„œìš¸">ì„œìš¸</option>
            <option value="ê²½ê¸°">ê²½ê¸°</option>
            <option value="ì¶©ì²­">ì¶©ì²­</option>
            <option value="ê°•ì›">ê°•ì›</option>
            <option value="ì „ë¼">ì „ë¼</option>
            <option value="ê²½ìƒ">ê²½ìƒ</option>
            <option value="ì œì£¼">ì œì£¼</option>
          </select>
          <span v-if="isRegionNull" class="error">ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”!</span>
        </div>
        <button @click="addUser">ì‚¬ìš©ì ì¶”ê°€</button>

        <div class="container">
          <div>
            <select v-model="selectRegion">
              <option selected value="">ëª¨ë“  ì§€ì—­</option>
              <option value="ì„œìš¸">ì„œìš¸</option>
              <option value="ê²½ê¸°">ê²½ê¸°</option>
              <option value="ì¶©ì²­">ì¶©ì²­</option>
              <option value="ê°•ì›">ê°•ì›</option>
              <option value="ì „ë¼">ì „ë¼</option>
              <option value="ê²½ìƒ">ê²½ìƒ</option>
              <option value="ì œì£¼">ì œì£¼</option>
            </select>
          </div>
          <table class="user-list">
            <thead>
              <tr>
                <th>ë²ˆí˜¸</th>
                <th>ì´ë¦„</th>
                <th>ì „í™”ë²ˆí˜¸</th>
                <th>ì§€ì—­</th>
                <th>ì‚­ì œ</th>
              </tr>
            </thead>
            <tbody>
              <tr
                v-for="(user,index) in users"
                :key="user.id"
                class="user-item"
                v-show="selectRegion==='' || user.region===selectRegion"
              >
                <td>{{index+1}}</td>
                <td>{{user.name}}</td>
                <td>{{user.phone}}</td>
                <td>{{user.region}}</td>
                <td>
                  <div class="delete-button" @click="deleteUser(index)">X</div>
                </td>
              </tr>
            </tbody>
          </table>

          <div v-if="users.length===0">ë“±ë¡ëœ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤</div>

          <div
            v-if="users.length>0 
            && !users.some(user => selectRegion==='' || user.region===selectRegion)"
          >
            ì„ íƒí•œ ì§€ì—­ì˜ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤
          </div>
        </div>
      </div>
    </div>

    <script src="https://unpkg.com/vue"></script>
    <script>
      const model = {
        users: [
          {
            id: 1,
            name: 'AA',
            phone: '010-1234-1111',
            region: 'ì„œìš¸',
          },
          {
            id: 2,
            name: 'BB',
            phone: '010-1234-1111',
            region: 'ì œì£¼',
          },
          {
            id: 3,
            name: 'CC',
            phone: '010-1234-1111',
            region: 'ê²½ê¸°',
          },
        ],

        newName: '',
        newPhone: '',
        newRegion: '',

        selectRegion: '',

        isNameNull: false,
        isPhoneNull: false,
        isRegionNull: false,
      };

      const vm = Vue.createApp({
        name: 'App',
        data() {
          return model;
        },
        methods: {
          addUser: function () {
            this.isNameNull = !this.newName;
            this.isPhoneNull = !this.newPhone;
            this.isRegionNull = !this.newRegion;

            if (this.isNameNull || this.isPhoneNull || this.isRegionNull) {
              return;
            }

            this.users.push({
              id: Date.now(),
              name: this.newName,
              phone: this.newPhone,
              region: this.newRegion,
            });

            this.newName = '';
            this.newPhone = '';
            this.newRegion = '';
          },
          deleteUser(index) {
            this.users.splice(index, 1);
          },
        },
      }).mount('#app');
    </script>
  </body>
</html>
